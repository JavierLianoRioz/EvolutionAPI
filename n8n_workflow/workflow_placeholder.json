{
  "name": "Email a WhatsApp",
  "notes": "Este es un placeholder. Describe el flujo que debes construir en la UI de n8n.",
  "nodes": [
    {
      "name": "Recibir Email (Webhook)",
      "type": "n8n-nodes-base.webhook",
      "notes": "Este nodo se activa cuando Google Pub/Sub (o tu servicio de email) le envía datos. Recibe el contenido del correo electrónico."
    },
    {
      "name": "Llamar a IA para Resumir",
      "type": "n8n-nodes-base.httpRequest",
      "notes": "Este nodo hace una petición POST a la API de tu modelo de IA (Claude, Gemini, etc.). Envía el cuerpo del email y espera un resumen.",
      "parameters": {
        "url": "${IA_API_URL}",
        "method": "POST",
        "body": {
          "prompt": "Resume el siguiente texto: {{ $json.body.text }}"
        }
      }
    },
    {
      "name": "Enviar a WhatsApp (Evolution API)",
      "type": "n8n-nodes-base.httpRequest",
      "notes": "Este nodo envía el resumen generado por la IA a un número de WhatsApp a través de la Evolution API.",
      "parameters": {
        "url": "http://evolution-api:8080/message/sendText/my-instance",
        "method": "POST",
        "headers": {
          "apikey": "${API_KEY}"
        },
        "body": {
          "number": "${WHATSAPP_DESTINATION_NUMBER}",
          "textMessage": {
            "text": "Resumen de tu correo: {{ $json.body.summary }}"
          }
        }
      }
    }
  ],
  "connections": {
    "Recibir Email (Webhook)": {
      "main": [
        [
          {
            "node": "Llamar a IA para Resumir",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Llamar a IA para Resumir": {
      "main": [
        [
          {
            "node": "Enviar a WhatsApp (Evolution API)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
